---
import { getCollection } from 'astro:content';

import Post from '../../components/Post.astro';
import Base from '../../layouts/Base.astro';

const projects = (await getCollection('projects')).sort(
    (a, b) => a.data.title.valueOf() - b.data.title.valueOf()
);
---

<Base leadTitle="My Work"  lead="All the stuff I've made, worked on, or contributed to.">
    <section name="work" class="container mx-auto">
        <div class="grid grid-cols-1 md:grid-cols-3">
            {projects.map((project) => (
                <Post url=`/my-work/${project.slug}` title={project.data.title} description={project.data.description} image={project.data.image}>
                    <div class="flex items-center justify-start"
                        <span class="font-bold">{ project.data.type }</span>
                    { project.data.organization && (
                        <span>&nbsp;&bull; { project.data.organization }</span>
                    )}
                    { project.data.role && (
                        <span>&nbsp;&bull; { project.data.role }</span>
                    )}
                    
                    </div>
                </Post>
            ))}
        </div>
    </section>
</Base>